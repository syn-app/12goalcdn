var VOUCHER= [
    {
    voucherCode: "GDVSVGGS",
    voucherName:"Maintenance Compensation",
    voucherAmt: 10.00,
    turnover: 'x3',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc4:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"0",
    redeemStatus: "0"
   
},
{
    voucherCode: "G4SVGGS",
    voucherName:"Maintenance Compensation",
    voucherAmt: 10.00,
    turnover: 'x3',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc4:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"0",
    redeemStatus: "0"
   
},
{
    voucherCode: "GDV3GGS",
    voucherName:"Maintenance Compensation",
    voucherAmt: 10.00,
    turnover: 'x3',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc4:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"0",
    redeemStatus: "0"
   
},
{
    voucherCode: "GD1SVGGS",
    voucherName:"Maintenance Compensation",
    voucherAmt: 10.00,
    turnover: 'x3',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc4:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"0",
    redeemStatus: "0"
   
},
{
    voucherCode: "GDVS99GGS",
    voucherName:"Maintenance Compensation",
    voucherAmt: 10.00,
    turnover: 'x3',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc4:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"0",
    redeemStatus: "0"
   
},
{
    voucherCode: "KKLDKLAD",
    voucherName:"RM 10 Free Bonus",
    voucherAmt: 88.00,
    turnover: 'x1',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"0",
    redeemStatus: "0"
},
{
    voucherCode: "IOELDKS",
    voucherName:"Maintenance Compensation2",
    voucherAmt: 1000,
    turnover: 'x5',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"0",
    redeemStatus: "0"
},
{
    voucherCode: "YYSSFSF",
    voucherName:"Maintenance Compensation3",
    voucherAmt: 1000,
    turnover: 'x1',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"1",
    redeemStatus: "0"
},
{
    voucherCode: "ZFETETSG",
    voucherName:"Maintenance Compensation4",
    voucherAmt: 1000,
    turnover: 'x1',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"1",
    redeemStatus: "1"
},
{
    voucherCode: "MYOLKDLAKD",
    voucherName:"Maintenance Compensation5",
    voucherAmt: 1000,
    turnover: 'x1',
    date: "12/01/2022 - 14/01/2022",
    tnc1:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc2:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    tnc3:"- Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    status:"1",
    redeemStatus: "1"
}
]

let statusCond = true;

function toggle() {
statusCond = statusCond ? false : true;

}


$(document).ready(function() {
    var activeVoucherArray = new Array();
    var historyVoucherArray = new Array();

    // active voucher
    if (VOUCHER.length > 0) {
        var htmlString = "";

    VOUCHER.forEach(record => {
        if (record.status == "0") {
        htmlString += "<div class='voucherRow'><div class='row'>"
        htmlString += "<div class='col-4 leftCol'><img class='voucherImg' src='images/voucher/present.png'>"
        htmlString += "<div class='voucherCodeTitle'>VOUCHER CODE:</div><div class='voucherCode'>" + record.voucherCode + "</div></div>"
        htmlString += "<div class='col-8 rightCol'><div class='voucherName'>" + record.voucherName + "</div>"
        htmlString += "<div class='voucherAmt'>RM " + record.voucherAmt.toFixed(2) + "</div>"
        htmlString += "<div class='voucherTurnover'>Turnover: " + record.turnover + "</div>"
        htmlString += "<div class='dateRow'><img src='images/voucher/date.png' class='calendarIcon'>" + record.date + "</div></div>"
        htmlString += "</div></div>"
        }
    });


    activeVoucherArray.push(htmlString);
    $("#claimableVoucher").html(activeVoucherArray.join(''));
}

//no voucher
else{
    $("#claimableVoucher").html("").append("<div><img src='images/voucher/no-voucher.png' class='noVoucherImg'></div><div class='pt-2 norecord'>No Voucher Records Found</div>")
}



//history
if (VOUCHER.length > 0) {
    var htmlString = "";

    VOUCHER.forEach(record => {
        if (record.status == "1") {
        htmlString += "<div class='voucherRow'><div class='row'>"
        htmlString += "<div class='col-4 leftCol'><img class='voucherImg' src='images/voucher/present.png'>"
        htmlString += "<div class='voucherCodeTitle'>VOUCHER CODE</div><div class='voucherCode'>" + record.voucherCode + "</div></div>"
        htmlString += "<div class='col-8 rightCol'><div class='voucherName'>" + record.voucherName + "</div>"
        htmlString += "<div class='voucherAmt'>RM " + record.voucherAmt.toFixed(2) + "</div>"
        htmlString += "<div class='voucherTurnover'>Turnover: " + record.turnover + "</div>"
        if (record.redeemStatus == "0") {
            htmlString += "<img class='collectedImg' src='images/voucher/collected.png'>"  
        }
        else{
            htmlString += "<img class='collectedImg' src='images/voucher/expired.png'>"  

        }
        

        htmlString += "<div class='dateRow'> <img src='images/voucher/date.png' class='calendarIcon'>" + record.date + "</div></div>"
        htmlString += "</div></div>"
        }
    });


    historyVoucherArray.push(htmlString);
    $("#historyVoucher").html(historyVoucherArray.join(''));
}else{
    $("#historyVoucher").html("").append("<div><img src='images/voucher/no-voucher.png' class='noVoucherImg'></div><div class='pt-2 norecord'>No Voucher Records Found</div>")
}

var amt;
var turnover;
$("#claimableVoucher .row").click(function(){
//   var v=  $(this +".voucherCode").html()
  var v= $(this).find(".voucherCode").text()
    let obj = VOUCHER.find(o => o.voucherCode === v);
    $("#voucherTitle").html('').append(obj.voucherName)
    $("#voucherDate").html('').append(obj.date)
    $("#modalVoucherCode").html('').append(obj.voucherCode)
    $("#modalVoucherName").html('').append(obj.voucherName)
    $("#modalVoucherAmt").html('').append(obj.voucherAmt.toFixed(2))
    $("#modalVoucherTurnover").html('').append(obj.turnover)
     amt=obj.voucherAmt.toFixed(2)
     turnover=obj.turnover
    // $("#voucherTnc").html('').append(obj.tnc3+"<br>"+obj.tnc1)
    $("#tnc1").html('').append(obj.tnc1)
    $("#tnc2").html('').append(obj.tnc2)
    $("#tnc3").html('').append(obj.tnc3)
    $("#tnc4").html('').append(obj.tnc4)

    
    $("#voucherModal").modal()


})

$("#redeemVoucher").click(function(){
        if(statusCond){
            $(".statusLogo").attr("src","images/wallet/trxn-tick.png")
            $(".successModalTitle").html("").append("SUCCESSFUL")
            $(".modalMsg").html("").append('<div >Dear Member, you have successful redeemed your voucher with amount <span class="redeemAmt">RM18 </span> (<span id="redeemTurnover">x1</span>). Please check your wallet balance. Thank you.</div>')
            $(".successActionRow").css("display","flex")
            $(".failActionRow").css("display","none")
        }
        else{
            $(".statusLogo").attr("src","images/wallet/trxn-close.png")
            $(".successModalTitle").html("").append("FAIL")
            $(".modalMsg").html("").append('<div >Opps…seems like there are some error for this voucher. Please contact Live Chat for further assistance. Thank you.</div>')
            $(".successActionRow").css("display","none")
            $(".failActionRow").css("display","flex")
        }
    $("#voucherModal").modal("hide")
    $(".redeemAmt").html("").append("RM"+amt)
    $("#redeemTurnover").html("").append(turnover)
    $("#successfulClaimVoucher").modal()

   

})


$(".form-input").keyup(function(){
    $(".form-submit").css("opacity", "1");
  });


});



function searchVoucher(){
    
    var emptyVal=true;
    var value = $(".form-input").val().toUpperCase();
    if(value == ''){
        emptyVal=false;
    }
        var values = [];    
    $("#claimableVoucher .voucherCode").each(function(){
        values.push($(this).text().toUpperCase());
    });
 
    if (emptyVal && values.indexOf(value) >= 0) {
        $("#claimableVoucher .voucherCode").parent().parent().parent().hide()
        $(".voucherCode:contains('"+value+"')").parent().parent().parent().show();
        $(this).parent().parent().parent().show();
        $(".clearInput").css("visibility","visible")
    }
    else  if (emptyVal && values.indexOf(value) >= -1) {
        $("#invalidVoucherCode").modal()
         $(".clearInput").css("visibility","visible");
    }



}

function clearInput(){
    $(".form-input").val('')
    // $(".clearInput").hide();
    $(".clearInput").css("visibility","hidden")
    $("#claimableVoucher .voucherRow").show()
    $(".form-submit").css("opacity", ".4");



}